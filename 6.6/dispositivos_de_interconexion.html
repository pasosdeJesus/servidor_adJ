<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>3. Dispositivos de interconexión</title><meta name="generator" content="DocBook XSL Stylesheets V1.68.1"><link rel="start" href="index.html" title="La distribución Aprendiendo de Jesús como servidor y cortafuegos"><link rel="up" href="index.html" title="La distribución Aprendiendo de Jesús como servidor y cortafuegos"><link rel="prev" href="redes_protocolos_e_internet.html" title="2. Redes, protocolos e Internet"><link rel="next" href="direcciones_enrutamiento_transporte_y_cortafuegos.html" title="4. Direcciones, enrutamiento, transporte y cortafuegos"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3. Dispositivos de interconexión</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="redes_protocolos_e_internet.html">Anterior</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="direcciones_enrutamiento_transporte_y_cortafuegos.html">Siguiente</a></td></tr></table><hr></div><div class="sect1" lang="es"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dispositivos_de_interconexion"></a>3. Dispositivos de interconexión</h2></div></div></div><p>
    Durante el arranque, OpenBSD detecta la gran mayoría de dispositivos
    conectados a un computador. Una vez en operación puede examinar la
    detección con <code class="literal">dmesg</code>.
  </p><p>
    Si durante el arranque algún dispositivo no es detectado o es
    detectado incorrectamente, puede intentar hacer modificaciones
    durante el arranque iniciando con <code class="literal">bsd -c</code> cuando
    esté en el prompt de arranque del programa <code class="literal">boot</code>
    (ver <a href="biblio.html" title="B. Bibliografía">usuario_OpenBSD</a>).
  </p><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="modem-nulo"></a>3.1. Conexión con un módem nulo</h3></div></div></div><p>
      Para conectar una terminal a un sistema OpenBSD puede emplearse un
      módem nulo. La terminal puede ser un computador con OpenBSD o con
      cualquier otro sistema operativo y un programa que permita ver la
      información que llegue a un puerto serial y enviar la que se
      teclee (por ejemplo sirven varios programas para comunicarse vía
      módem).
    </p><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="modem-nulo-hardware"></a>3.1.1. Módem Nulo</h4></div></div></div><p>
        Un módem nulo es un cable serial que tiene en sus extremos dos
        conectores hembra para puerto serial y que intercambia algunas
        conexiones. Si ambos conectores son de 25 pines, todos los
        cables deben estar sueltos excepto:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            (DSR) 6 &amp; (DCD) 8 -- 20,
          </p></li><li><p>
            (TxD) 2 -- 3,
          </p></li><li><p>
            (RxD) 3 -- 2,
          </p></li><li><p>
            (RTS) 4 -- 5,
          </p></li><li><p>
            (CTS) 5 -- 4,
          </p></li><li><p>
            (SG) 7 -- 7,
          </p></li><li><p>
            (DTR) 20 -- 6 &amp; 8.
          </p></li></ul></div><p>
        En un conector de 9 pines la nomenclatura es: 1 DCD, 2 TxD, 3
        RxD, 4 DTR, 5 SG, 6 DSR, 7 RTS y 8 CTS.
      </p><p>
        Un módem nulo mínimo sólo requiere que se conecten SG - SG
        (tierra), TxD - RxD (transmisión de uno con recepción del otro)
        y RxD - TxD. Sin embargo para poder efectuar control de flujo
        también deben conectarse los demás.
      </p><p>
        Aunque en el comercio es posible comprar un módem nulo, también
        es relativamente fácil ensamblar uno, una vez tenga conectores,
        cable y cautín. Si hace su propio módem nulo puede probar que la
        conexión haya quedado bien empleando un óhmetro.
      </p><p>
        Una vez se conecte un módem nulo puede probarlo enviando
        mensajes por el puerto serial del uno y viendo lo que recibe en
        el otro. Por ejemplo si conecta dos sistemas OpenBSD empleando
        en ambos el primer puerto serial, en uno de los dos puede
        ejecutar (como usuario <code class="literal">root</code>)
      </p><pre class="programlisting">
    cat &lt; /dev/cua00
</pre><p>
        mientras que en el otro ejecute
      </p><pre class="programlisting">
    cat &gt; /dev/cua00
</pre><p>
        cuando escriba en el segundo y presione ENTER, en el primero
        recibirá el mensaje y líneas en blanco (<code class="literal">cat</code>
        no es el programa apropiado para establecer la comunicación,
        sólo para probar).
      </p></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="servidor"></a>3.1.2. Servidor</h4></div></div></div><p>
        Con un módem nulo conectado y funcionado puede configurarse un
        sistema OpenBSD como servidor para que permita conectar
        terminales a un puerto serial. Debe configurarse el programa
        <code class="literal">init</code> para que durante el arranque ejecute un
        programa que reciba conexiones por el puerto serial (tal
        programa normalmente es <code class="literal">getty</code>).
      </p><p>
        Basta editar el archivo <code class="literal">/etc/ttys</code>, quitar el
        comentario a la línea apropiada para que quede:
      </p><pre class="programlisting">
    tty00   "/usr/libexec/getty std.9600"   vt220 on secure
</pre><p>
        Después puede reiniciar el sistema o reiniciar
        <code class="literal">init</code> con: <code class="literal">kill -HUP 1</code>.
      </p><p>
        En la línea modificada a <code class="literal">/etc/ttys</code>,
        <code class="literal">tty00</code> se refiere a
        <code class="literal">/dev/tty00</code> (i.e el dispositivo del primer
        puerto serial); <code class="literal">/usr/libexec/getty std.9600</code>
        es la orden por ejecutar al arranque para manejar ese
        dispositivo<sup>[<a name="idm53640712" href="#ftn.idm53640712">17</a>]</sup>; <code class="literal">vt220</code> indica el tipo de terminal
        que se conectará; <code class="literal">on</code> y
        <code class="literal">secure</code> son banderas<sup>[<a name="idm722672264" href="#ftn.idm722672264">18</a>]</sup> para <code class="literal">init</code>, el primero indica que
        se esperan conexiones por esa línea tty y el segundo indica que
        puede iniciar conexiones el usuario root.
      </p></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="Terminal"></a>3.1.3. Terminal</h4></div></div></div><p>
        Una vez conectado su módem nulo a un servidor OpenBSD ya
        configurado para recibir conexiones por el puerto serial, puede
        conectar una terminal.
      </p><p>
        Si la terminal cuenta con un sistema operativo, puede emplear un
        programa de comunicaciones. Con este debe poder ver los mensajes
        de login del servidor. Desde ahí puede entrar como un usuario de
        ese sistema y trabajar como en una de las consolas virtuales
        (sin ambiente X).
      </p><p>
        Si el computador que va a conectar es un sistema OpenBSD puede
        emplear el programa <code class="literal">tip</code> como usuario root:
      </p><pre class="programlisting">
    tip tty0 
</pre><p>
        Es posible que tenga que intentar varias veces, si configura el
        servidor con una velocidad diferente puede especificarla por
        ejemplo con <code class="literal">tip -38400 tty0</code>
      </p><p>
        <code class="literal">tip</code> empleará la descripción de
        <code class="literal">tty0</code> disponible en
        <code class="literal">/etc/remote</code> (que por defecto está configurado
        para representar el primer puerto serial). Le permitirá ver la
        información que el servidor envíe, enviar información al
        servidor y hacer algunas operaciones especiales comenzando con
        el caracter '~'. Por ejemplo terminar la sesión con '~.', enviar
        un archivo con '~p' o recibir un archivo con '~g'.
      </p><p>
        Dado que puede haber inconvenientes enviando o recibiendo
        archivos de 8 bits, los archivos (especialmente binarios) que
        envíe o reciba con <code class="literal">tip</code> debe codificarlos
        antes con <code class="literal">uuencode</code> y decodificarlos después
        de transmitidos con <code class="literal">uudecode</code>. Para codificar
        un archivo <code class="literal">prog.tgz</code> y dejarlo codificado en
        <code class="literal">prog.tgz.uue</code>:
      </p><pre class="programlisting">
    uuencode prog.tgz &lt; prog.tgz &gt; prog.tgz.uue
</pre><p>
        posteriormente para decodificarlo:
      </p><pre class="programlisting">
    uudecode prog.tgz.uue
</pre><p>
        El inconveniente del método descrito es que
        <code class="literal">tip</code> no verifica la información transmitida.
        Una alternativa es emplear un protocolo como Zmodem. Para eso
        instale tanto en cliente como en servidor el paquete
        <code class="literal">zmtx-zmrx</code> (o <code class="literal">lrzsz</code>).
        Cuando desee transmitir un archivo del servidor al cliente,
        inicie la transmisión en el servidor:
      </p><pre class="programlisting">
    zmtx Mattich2.pdf
</pre><p>
        y en el cliente desde <code class="literal">tip</code> use
        <code class="literal">~C zmrx</code>. Para enviar un archivo del cliente
        al servidor ejecute en el servidor: <code class="literal">zmrx</code> y
        después desde <code class="literal">tip</code> use:
        <code class="literal">~C zmtx miarchivo.txt</code>
      </p></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="ppp-sobre-modem-nulo"></a>3.1.4. PPP sobre Módem Nulo</h4></div></div></div><p>
        Una vez esté conectado un cliente con un servidor OpenBSD, es
        posible emplear el protocolo PPP<sup>[<a name="idp2022090872" href="#ftn.idp2022090872">19</a>]</sup> para permitirle al computador cliente acceder a
        Internet o a la red a la que esté conectado el servidor.
      </p><p>
        Una forma posible para lograr conectividad a Internet en una
        Intranet es asignando una dirección estática de la red al
        cliente y empleando el servidor para que actúe como proxy a
        nivel ARP.
      </p><p>
        En el servidor asegúrese de tener en el archivo
        <code class="literal">/etc/ppp/ppp.conf</code>:
      </p><pre class="programlisting">
    default:
      set log Phase Chat LCP IPCP CCP tun command
      set device /dev/cua00
      set speed 115200
      set ctsrts on
      set dial ""
    
    modemnulo:
      set timeout 0
      set lqrperiod 10
      enable proxy
      enable lqr
      accept lqr
      allow users SuLogin
</pre><p>
        Remplazando <code class="literal">SuLogin</code>,
        <code class="literal">SuClave</code> y las direcciones de red por las
        apropiadas. Por su parte el archivo
        <code class="literal">/etc/ppp/ppp.conf</code> del cliente debe contener:
      </p><pre class="programlisting">
    default:
     set log Phase Chat LCP IPCP CCP tun command
     set device /dev/cua00
     set speed 115200
     set ctsrts on
     set dial ""
    
    modemnulo:
      set dial ""
      set authkey SuClave
      set login "TIMEOUT 3 ogin:-\\r-login: SuLogin word: \\P $ ppp\\s\\-direct\\smodemnulo\\r"
      set lqrperiod 10
      set timeout 0
      set ifaddr 192.168.16.20 192.168.16.131
      add default HISADDR
      enable lqr
      accept lqr
      enable dns
</pre><p>
        Después pude iniciar la comunicación desde el cliente con:
      </p><pre class="programlisting">
    ppp -ddial modemnulo
</pre></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="referencias-modem-nulo"></a>3.1.5. Referencias y lecturas recomendadas</h4></div></div></div><p>
        Puede consultar más sobre la conexión física de un módem nulo en
        <a href="biblio.html" title="B. Bibliografía">CablesModemNulo</a>. Puede consultar
        sobre comunicaciones seriales en FreeBSD (similar a OpenBSD) en
        el capítulo "Serial Communications" de
        <a href="biblio.html" title="B. Bibliografía">FreeBSDHandbook</a> Para emplear un
        sistema OpenBSD mínimo como consola de algunos eventos de un
        servidor OpenBSD puede consultar
        <a href="biblio.html" title="B. Bibliografía">SerialOpenBSD</a>. La configuración
        del servidor OpenBSD que le permite atender conexiones por el
        puerto serial puede verse en las siguientes páginas man: init 8,
        ttys 5 y getty 8. La configuración de un cliente OpenBSD para
        funcionar como consola puede consultarse en: tip 1 y remote 5.
        Para conocer más sobre PPP puede consultarse el
        <a href="ftp://ftp.rfc-editor.org/in-notes/rfc1661.txt" target="_top">RFC
        1661</a>, la implementación particular de el protocolo de
        usuario en OpenBSD en la página del manual. El archivo de
        configuración por defecto también cuenta con comentarios que
        ayudan.
      </p></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="modem-isdn"></a>3.2. Conexión a Internet con un módem o módem ISDN</h3></div></div></div><p>
      Es posible conectar un sistema OpenBSD a Internet empleando un
      módem o un módem ISDN. Para esto el módem que se emplea debe estar
      soportado y debe configurarse <code class="literal">ppp</code> para realizar
      la conexión.
    </p><p>
      Hay diversos tipos de módems (tarjetas ISA, PCI, módems externos
      USB o seriales), los módems externos que se conectan a puerto
      serial son los más fáciles de configurar, algunos módems USB
      también son soportados (los que tengan ordenes multiplexadas y
      datos --como indica la página del manual del controlador
      <code class="literal">umodem</code>) y eventualmente es posible hacer
      funcionar tarjetas ISDN ISA o PCI
      (<a href="http://people.freebsd.org/~hm/i4b-home/" target="_top">http://people.freebsd.org/~hm/i4b-home/</a>).
    </p><p>
      Los módems y los módems ISDN reciben ordenes AT y se configuran
      empleando <code class="literal">ppp</code>. Por ejemplo el archivo
      <code class="literal">/etc/ppp/ppp.conf</code> podría incluir porciones como
      las siguientes (remplazando el número de teléfono, el nombre de la
      cuenta y la clave por los correctos):
    </p><pre class="programlisting">
    default:
      set log Phase Chat LCP IPCP CCP tun command
      set device /dev/cua01
      set speed 115200
      set dial "ABORT BUSY ABORT NO\\sCARRIER TIMEOUT 5 \"\" AT \
        OK-AT-OK ATE1Q0 OK \\dATDT\\T TIMEOUT 40 CONNECT"
    
    
    PAP:
     set phone 019478909891 
     set authname micuenta@miproveedor.com
     set authkey laclaveusada
     set timeout 120
     add default HISADDR
     enable dns
</pre><p>
      Para conectarse ejecute
      <code class="literal">/usr/sbin/ppp -ddial PAP</code> desde una cuenta que
      pertenezca al grupo <code class="literal">network</code>. Cuando se
      establezca la conexión quedará asociada una dirección IP a una
      interfaz <code class="literal">tun</code> (e.g a <code class="literal">tun0</code>).
      Puede también emplear el siguiente script para realizar la
      conexión:
    </p><pre class="programlisting">
    #!/bin/sh
    # Dominio público. 2004.
    
    # Usa configuración de /etc/ppp/ppp.conf regla PAP
    
    netw=`groups | sed -e "s/.*network.*/1/g"`;
    if (test "$netw" != "1") then {
        echo "Para usar PPP debe ser del grupo network";
        exit 1;
    } fi;
    
    IP=`/sbin/ifconfig tun0 | tail -n 1 | sed -e "s/.*inet \([.0-9]*\) .*/\1/g"`;
    esta=`echo $IP | sed -e "s/^[0-9][.0-9]*$/SI/g"`
    if (test "$esta" = "SI") then {
        echo "Ya está conectado, IP es $IP";
        exit 0;
    } fi;
    /usr/sbin/ppp -ddial PAP
    while (test "$esta" != "SI") ; do
        sleep 1;
        IP=`/sbin/ifconfig tun0 | tail -n 1 | sed -e "s/.*inet \([.0-9]*\) .*/\1/g"`;
        esta=`echo $IP | sed -e "s/^[0-9][.0-9]*$/SI/g"`
    done
    
    echo "Conectado. La IP es $IP";
</pre><p>
      Y el siguiente que facilita la desconexión:
    </p><pre class="programlisting">
    pid=`ps ax | grep "[p]pp" | sed -e "s/^[ ]*\([0-9]*\) .*$/\1/g"`;
    espid=`echo $pid | sed -e "s/^[0-9][0-9]*$/SI/g"`;
    if (test "$espid" != "SI") then {
      echo "No está conectado";
      exit 1;
    } fi;
    kill -HUP $pid
    echo "Desconectado";
</pre></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="adsl-pppoe"></a>3.3. Conexión a Internet ADSL con pppoe</h3></div></div></div><p>
      En Colombia los proveedores de acceso a Internet en planes de
      Banda Ancha típicamente emplean dispositivos y configuraciones que
      permiten conectar un computador como si fuera un equipo más en una
      red Ethernet. En tal caso basta conocer la IP que tendrá el
      computador (o si se usará dhcp), la mascara de red y la dirección
      de la puerta de enlace, y configurar como se explica en la sección
      de redes LAN Ethernet (ver
      <a href="dispositivos_de_interconexion.html#lan-ethernet" title="3.4. Uso y configuración en una red LAN Ethernet">Sección 3.4, “Uso y configuración en una red LAN Ethernet”</a>.
    </p><p>
      Puede ocurrir que su proveedor emplee un módem que requiera el
      protocolo <code class="literal">pppoe</code> (e.g con un Módem Marconi). En
      tal caso el proveedor puede brindar dos opciones para la
      configuración del módem:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Enrutador (router): Se conecta a un HUB o a un computador y
          hace NAT para todos los computadores cliente conectados. En la
          LAN basta configurar la IP de cada equipo para que estén en la
          misma subred del enrutador y que cada uno emplee como
          compuerta/pasarela al módem.
        </p></li><li><p>
          Puente (bridge): En esta configuración se requiere un servidor
          que haga NAT y enrute.
        </p></li></ul></div><p>
      Si el módem ADSL se conecta con un cable Ethernet y el proveedor
      ofrece ppp, no debe configurarse la tarjeta de red, sino una
      interfaz nueva tun0 Por esto en el archivo de configuración de la
      tarjeta digamos <code class="literal">/etc/hostname.rl0</code> (reemplazar
      <code class="literal">rl0</code> con interfaz en su caso, examinar posibles
      interfaces con <code class="literal">ifconfig</code>) deje:
    </p><pre class="programlisting">
    up
    
</pre><p>
      Edite <code class="literal">/etc/ppp/ppp.conf</code> (si no existe cópielo
      de <code class="literal">/etc/ppp/ppp.conf.smaple</code>), para que quede
      una sección como la siguiente:
    </p><pre class="programlisting">
    pppoe:
     set log Phase Chat LCP IPCP CCP tun command
     set redial 15 0
     set reconnect 15 10000
     set device "!/usr/sbin/pppoe -i rl0"
     set mtu max 1492
     set mru max 1492
     set speed sync
     disable acfcomp protocomp
     deny acfcomp
     enable lqr
     set lqrperiod 5
     set cd 5
     set dial
     set login
     set timeout 0
     set authname "usuario"
     set authkey "miclave"
     add! default HISADDR
     enable mssfixup
    
</pre><p>
      Cambiando la interfaz de red, el usuario y la clave. Podrá probar
      la conexión con:
    </p><pre class="programlisting">
    ppp -ddial -nat pppoe
    
</pre><p>
      Si desea que en cada arranque se conecte automáticamente, tal como
      se explica en
      <a href="http://www.aei.ca/~pmatulis/pub/obsd_pppoe.html" target="_top">http://www.aei.ca/~pmatulis/pub/obsd_pppoe.html</a>
      agregue a <code class="literal">/etc/rc.local</code>:
    </p><pre class="programlisting">
    IPADSL=$(netstat -rn | grep tun0 | grep ^[0-9] | awk '{print$2}')
    if [ -z "$IPADSL" ]; then
        echo -n "Estableciendo conexion PPPoE DSL"; ppp -ddial pppoe
        for i in 10 9 8 7 6 5 4 3 2 1 0; do 
            sleep 5             
            echo -n "$i"        
            IPADSL=$(netstat -rn | grep tun0 | grep ^[0-9] | awk '{print$2}')
            if [ -z "$IPADSL" ]; then
                    break
            fi                  
        done     
    fi
</pre><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="referencias-pppoe"></a>3.3.1. Referencias y lecturas recomendadas</h4></div></div></div><p>
        Página del manual <code class="literal">pppoe</code>.
      </p><p>
        http://www.aei.ca/~pmatulis/pub/obsd_pppoe.html
      </p></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="lan-ethernet"></a>3.4. Uso y configuración en una red LAN Ethernet</h3></div></div></div><p>
      La red local (LAN) Ethernet más simple puede conformarse con 2
      computadores cada uno con tarjeta ethernet interconectados por un
      cable UTP cruzado. Sin embargo típicamente una red ethernet consta
      de varios computadores con tarjetas Ethernet interconectados por
      uno o más<sup>[<a name="idm718498312" href="#ftn.idm718498312">20</a>]</sup> concentradores (también llamado
      <span class="emphasis"><em>hub</em></span> o <span class="emphasis"><em>switch</em></span>) y cables
      UTP directos de cada computador a algún concentrador. La velocidad
      de la red depende de la velocidad de las tarjetas de red, la
      velocidad de los concentradores y la categoría de los cables. Esta
      velocidad se mide en Megabits (millones de bits por segundo), y
      sus valores típicos son 10Mb, 100Mb, 1000Mb o 1Gb y recientemente
      10Gb.
    </p><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="tarjetas-ethernet"></a>3.4.1. Tarjetas Ethernet</h4></div></div></div><p>
        La inmensa mayoría de tarjetas Ethernet de 10MB, 100MB y 1000MB,
        así como algunas de 10G son soportadas por OpenBSD, la lista
        completa la puede consultar en:
        <a href="http://www.openbsd.org/amd64.html" target="_top">http://www.openbsd.org/amd64.html</a>.
        Por su parte las tarjetas populares que hemos identificado como
        no soportadas son: Encore ENL832-TX-RENT, Encore ENL832-TX-EN.
      </p><p>
        En cada computador, cada dispositivo de interconexión se asocia
        a una interfaz de red cuando es detectado en el momento del
        arranque (o por demanda como en el caso de
        <code class="literal">tun0</code>). Estas interfaces se administran con
        <code class="literal">ifconfig</code>, por ejemplo para listarlas todas
        utilice:
      </p><pre class="programlisting">
    ifconfig -a
</pre><p>
        A continuación se presenta un ejemplo de la salida de esta
        orden:
      </p><pre class="programlisting">
    lo0: flags=8049&lt;UP,LOOPBACK,RUNNING,MULTICAST&gt; mtu 33160
        priority: 0
        groups: lo
        inet 127.0.0.1 netmask 0xff000000
        inet6 ::1 prefixlen 128
        inet6 fe80::1%lo0 prefixlen 64 scopeid 0x6
    re0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        lladdr 00:14:d1:1a:cf:b2
        priority: 0
        groups: egress
        media: Ethernet autoselect (100baseTX full-duplex,rxpause,txpause)
        status: active
        inet 189.148.51.41 netmask 0xffffff00 broadcast 189.148.51.255
        inet6 fe80::214:d1ff:fe1a:cfb2%re0 prefixlen 64 scopeid 0x1
    re1: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        lladdr 00:14:d1:1a:ce:93
        priority: 0
        media: Ethernet autoselect (1000baseT full-duplex)
        status: active
        inet 192.168.2.1 netmask 0xffffff00 broadcast 192.168.2.255
        inet6 fe80::214:d1ff:fe1a:ce93%re1 prefixlen 64 scopeid 0x2
    re2: flags=8802&lt;BROADCAST,SIMPLEX,MULTICAST&gt; mtu 1500
        lladdr 00:14:d1:1a:cf:af
        priority: 0
        media: Ethernet autoselect (10baseT half-duplex)
        status: no carrier
    vr0: flags=8843LGUP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        lladdr 00:19:db:82:8f:93
        priority: 0
        media: Ethernet autoselect (100baseTX full-duplex)
        status: active
        inet 192.168.1.1 netmask 0xffffff00 broadcast 192.168.1.255
        inet6 fe80::219:dbff:fe82:8f93%vr0 prefixlen 64 scopeid 0x4
    enc0: flags=0LG&gt; mtu 1536
        priority: 0
    pflog0: flags=141LGUP,RUNNING,PROMISC&gt; mtu 33160
        priority: 0
        groups: pflog
</pre><p>
        Es como una tabla con 2 columnas, en la de la izquierda se lista
        el nombre de la interfaz de red (en este ejemplo
        <code class="literal">lo0</code>, <code class="literal">re0</code>,
        <code class="literal">re1</code>, <code class="literal">re2</code>,
        <code class="literal">vr0</code>, <code class="literal">enc0</code>,
        <code class="literal">pflog0</code>), y a la derecha las características
        de cada interfaz, por ejemplo las características de la interfaz
        <code class="literal">re0</code> son:
      </p><pre class="programlisting">
    flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
    lladdr 00:14:d1:1a:cf:b2
    priority: 0
    groups: egress
    media: Ethernet autoselect (100baseTX full-duplex,rxpause,txpause)
    status: active
    inet 189.148.51.41 netmask 0xffffff00 broadcast 189.148.51.255
    inet6 fe80::214:d1ff:fe1a:cfb2%re0 prefixlen 64 scopeid 0x1
</pre><p>
        Algunas de las interfaces corresponden a tarjetas de red (en
        este ejemplo <code class="literal">re0</code>, <code class="literal">re1</code>,
        <code class="literal">re2</code> y <code class="literal">vr0</code>) mientras que
        otras son virtuales, como <code class="literal">lo0</code> que representa
        el mismo computador, <code class="literal">enc0</code> que sirve para
        cifrados con IPSec y <code class="literal">pflog0</code> que permite
        examinar en tiempo real actividad del cortafuegos
        <code class="literal">pf</code>.
      </p><p>
        Con respecto a las propiedades de cada interfaz física,
        resaltamos
      </p><div class="variablelist"><dl><dt><span class="term">
            <code class="literal">status</code>
          </span></dt><dd><p>
              Puede ser <code class="literal">active</code> para indicar que hay
              cable conectado a la tarjeta en un extremo y el otro
              extremo está conectado a algún concentrador (o a otro
              computador si es cruzado). Note que en el ejemplo la
              interfaz <code class="literal">re2</code> no está conectada.
            </p></dd><dt><span class="term">
            <code class="literal">lladdr</code>
          </span></dt><dd><p>
              Con la dirección MAC de la tarjeta de red (un número único
              para cada tarjeta fabricada).
            </p></dd><dt><span class="term">
            <code class="literal">inet</code>
          </span></dt><dd><p>
              Propiedades IPv4, por ejemplo:
            </p><pre class="programlisting">
    inet 189.148.51.41 netmask 0xffffff00 broadcast 189.148.51.255
</pre><p>
              Indica que la IP es 189.148.51.41, con mascara de red
              255.255.255.0 (en hexadecimal 255 es
              <code class="literal">ff</code>), y dirección para envíos masivos
              (broadcast) 189.148.51.255.
            </p></dd><dt><span class="term">
            <code class="literal">inet6</code>
          </span></dt><dd><p>
              Propiedades IPv6, por ejemplo:
            </p><pre class="programlisting">
    inet6 fe80::214:d1ff:fe1a:cfb2%re0 prefixlen 64 scopeid 0x1
</pre><p>
              Indica que la dirección IPv6 es
              <code class="literal">fe80::214:d1ff:fe1a:cfb2</code>
            </p></dd><dt><span class="term">
            <code class="literal">media</code>
          </span></dt><dd><p>
              Que indica tipo de medio físico que está conectado o
              configurado en esa interfaz. En el ejemplo presentado las
              interfaces <code class="literal">re0</code> y <code class="literal">vr0</code>
              están operando a 100Mb (Megabit), mientras que la interfaz
              <code class="literal">re1</code> está operando a 1Gb (Gigabit).
            </p></dd><dt><span class="term">
            <code class="literal">flags</code>
          </span></dt><dd><p>
              Que indica banderas que tiene activa la interfaz y la MTU
              (Unidad de transferencia máxima). Note que
              <code class="literal">lo0</code> es la única que tiene la bandera
              <code class="literal">LOOPBACK</code> la cual indica que esa
              interfaz es virtual y se refiere al mismo computador.
            </p></dd></dl></div><p>
        Los dispositivos reconocidos en el momento del arranque que se
        asocian a interfaces de red, así como los que no logran
        configurarse, pueden verse con:
      </p><pre class="programlisting">
    dmesg | less
</pre><p>
        Un ejemplo típico de una tarjeta Ethernet reconocida es:
      </p><pre class="programlisting">
    re0 at pci0 dev 8 function 0 "Realtek 8169" rev 0x10: RTL8169/8110SB (0x1000), apic 2 int 16 (irq 10), address 00:14:d1:1a:cf:b2
</pre><p>
        Note que se lista el nombre de la interfaz (i.e
        <code class="literal">re0</code>), los recursos de hardware que emplea y
        la dirección MAC (i.e <code class="literal">00:14:d1:1a:cf:b2</code>).
      </p><p>
        OpenBSD incluye documentación completa para cada tipo de
        dispositivo detectable (por ejemplo opciones); para el caso del
        controlador del ejemplo anterior puede verse con:
      </p><pre class="programlisting">
    man re
</pre></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="configuracion-interfaz"></a>3.4.2. Configuración de una interfaz de red</h4></div></div></div><p>
        Debe configurar cada interfaz de red en un archivo con un nombre
        de la forma <code class="literal">/etc/hostname.interfaz</code>. Por
        ejemplo para el caso de la tarjeta con controlador
        <code class="literal">re</code> e interfaz asignada por el kernel en el
        arranque <code class="literal">re0</code>, seria
        <code class="literal">/etc/hostname.re0</code>.
      </p><p>
        Como se explica en <code class="literal">man hostname.if</code> en el caso
        de una red IPv4 con DHCP basta que ese archivo tenga la línea:
      </p><pre class="programlisting">
    dhcp
</pre><p>
        Si el direccionamiento en la red local es estático, tal archivo
        debe tener en una línea separados por un espacio los siguientes
        datos (en este orden):
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Familia de direcciones. Tìpicamente <code class="literal">inet</code>
          </p></li><li><p>
            IP (e.g <code class="literal">189.148.51.41</code>)
          </p></li><li><p>
            Mascara de red (e.g <code class="literal">255.255.255.0</code>)
          </p></li><li><p>
            Dirección de broadcast o la palabra <code class="literal">NONE</code>
          </p></li><li><p>
            Eventualmente opciones
          </p></li></ul></div><p>
        La línea completa sería:
      </p><pre class="programlisting">
    inet 189.148.51.41 255.255.255.0 NONE
</pre><p>
        Un archivo como estos lo puede crear y/o editar con cualquier
        editor de texto (por ejemplo <code class="literal">mg</code> o
        <code class="literal">vim</code>). Si tiene sesión de X-Window puede
        emplear desde una terminal
      </p><pre class="programlisting">
    doas touch /etc/hostname.re0; doas xfw /etc/hostname.re0
</pre><p>
        Estas ediciones también las puede hacer en adJ con botón derecho
        sobre el escritorio Dispositivos-&gt;Red-&gt;Configurar
        Interfaces, que le permitirá editar cada uno de los archivos de
        cada interfaz de red detectada por ifconfig (excepto lo0, enc0,
        pflog0, tun).
      </p><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="strong"><strong>Advertencia</strong></span>
        </p><p>
          Es importante que la línea del archivo
          <code class="literal">/etc/hostname.re0</code> que configura sus
          propiedades IPv4, termine con el caracter fin de línea, es
          decir que en el editor con el que la edite termine la línea
          con la tecla RETORNO.
        </p></blockquote></div><p>
        Y la IP de la compuerta de su red (ver
        <a href="direcciones_enrutamiento_transporte_y_cortafuegos.html#ipv4" title="4.1. Introducción a TCP/IPv4">Sección 4.1, “Introducción a TCP/IPv4”</a>) se configura en
        <code class="literal">/etc/mygate</code> que también debe editar con su
        editor preferido y que también debe terminar con fin de línea.
        Un ejemplo típico del contenido sería una línea con:
      </p><pre class="programlisting">
    189.148.51.1
</pre><p>
        Con adJ puede hacer botón derecho sobre el escritorio
        Dispositivos-&gt;Red-&gt;Configurar Puerta de Enlace.
      </p><p>
        Después de hacer cambios a la configuración de red es posible
        que pueda reiniciar el sistema de redes con:
      </p><pre class="programlisting">
    doas sh /etc/netstart
</pre><p>
        aunque en algunos casos es necesario reiniciar el computador.
      </p><p>
        Note que si ha cambiado una tarjeta de red es posible que antes
        de reiniciar debe reconfigurar el cortafuegos en el archivo
        <code class="literal">/etc/pf.conf</code>
      </p></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="protocolo-arp"></a>3.4.3. Protocolo ARP</h4></div></div></div><p>
        La tabla del protocolo ARP asocia direcciones físicas de
        tarjetas de red conectadas a su red con direcciones IP. Para
        examinar tal tabla use:
      </p><pre class="programlisting">
    arp -a 
</pre><p>
        es posible agregar entradas de manera permanente o eliminarlas
        con las opciones <code class="literal">-s</code> y <code class="literal">-d</code>
        respectivamente.
      </p></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="cableado"></a>3.4.4. Cableado de una red local</h4></div></div></div><div class="sect4" lang="es"><div class="titlepage"><div><div><h5 class="title"><a name="planeaci%C3%B3n"></a>3.4.4.1. Planeación</h5></div></div></div><p>
          Necesitará un concentrador preferiblemente de 1Gb con
          suficientes puertos para todos los computadores que tenga o
          varios interconectados en cascada, cable UTP categoría 5e o 6
          con conectores RJ-45 y en cada computador deberá tener una
          tarjeta Ethernet (preferiblemente de 1GB) con un puerto para
          un conector RJ-45 (ver
          <a href="dispositivos_de_interconexion.html#configuracion-interfaz" title="3.4.2. Configuración de una interfaz de red">Configuración de una
          interfaz de red</a>).
        </p><p>
          El espacio físico en el que esté la red será la primera
          restricción que debe tener en cuenta. Haga un plano de ese
          espacio con las distancias a escala, ubique los computadores y
          diseñe el recorrido de los cables al concentrador. Hay varias
          recomendaciones que puede tener en cuenta al diseñar el mapa:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Es aconsejable por estética y seguridad que los cables
              vayan por canaletas.
            </p></li><li><p>
              La longitud máxima de cada cable (para unir concentrador y
              computador) es de 100 m.
            </p></li><li><p>
              Busque que los cables/canaletas vayan por las paredes del
              recinto y estén resguardadas (para evitar que alguien se
              tropiece).
            </p></li></ul></div><p>
          En el mapa que haga también puede consignar las direcciones IP
          que planee usar en cada computador. Emplee direcciones
          asignadas para redes privadas, por ejemplo 192.168.1.1 al
          servidor y los clientes 192.168.1.2, 192.168.1.3 y así
          sucesivamente. Cómo compuerta emplee en todos los clientes la
          dirección del servidor y como máscara de red emplee
          <code class="literal">255.255.255.0</code> (ver
          <a href="direcciones_enrutamiento_transporte_y_cortafuegos.html#ipv4" title="4.1. Introducción a TCP/IPv4">Sección 4.1, “Introducción a TCP/IPv4”</a> ).
        </p></div><div class="sect4" lang="es"><div class="titlepage"><div><div><h5 class="title"><a name="adquisicion-de-hardware"></a>3.4.4.2. Adquisición de Hardware</h5></div></div></div><p>
          Para hacer la adquisición de Hardware tenga en cuenta:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Los nombres de los componentes pueden variar de un almacén
              a otro, algunos sinónimos son:
            </p><div class="itemizedlist"><ul type="circle"><li><p>
                  tarjeta ethernet, tarjeta con conectores RJ45
                </p></li><li><p>
                  concentrador o <span class="emphasis"><em>hub</em></span> o
                  <span class="emphasis"><em>switch</em></span> repetidor
                </p></li><li><p>
                  cable de pares trenzados, par trenzado, twisted pair,
                  cable Ethernet, UTP (<span class="emphasis"><em>Unshielded Twisted
                  Pair</em></span>).
                </p></li></ul></div></li><li><p>
              Use el plano de red para determinar la longitud de cada
              cable, recuerde que todo computador debe tener un cable
              que lo una con el concentrador (compre un poco más de la
              longitud que midió pues al intentar ensamblar los
              conectores podría perder algo de cable en cada intento).
            </p></li><li><p>
              El concentrador debe tener suficientes puertos para todos
              los computadores (pueden ponerse varios concentradores en
              cascada).
            </p></li><li><p>
              Cada computador debe tener una tarjeta de red Ethernet
              preferiblemente 1Gb que pueda usar desde OpenBSD (ver
              <a href="dispositivos_de_interconexion.html#configuracion-interfaz" title="3.4.2. Configuración de una interfaz de red">Configuración de
              una interfaz de red</a>) ---recordar que las más
              incompatibles son las populares Encore.
            </p></li><li><p>
              Cada cable debe tener dos conectores RJ-45. Uno para
              conectarlo al computador y el otro para conectarlo al
              concentrador. (Compre varios conectores RJ-45 adicionales
              pues al intentar ensamblar podría perder algunos).
            </p><p>
              RJ45 Este es el tipo de conectores que debe ir en cada
              extremo de un cable UTP en una red Ethernet como la que
              sugerimos.
            </p></li></ul></div></div><div class="sect4" lang="es"><div class="titlepage"><div><div><h5 class="title"><a name="instalacion-de-cables-y-concentrador"></a>3.4.4.3. Instalación</h5></div></div></div><p>
          Una vez tenga instaladas las tarjetas de red debe conectar los
          cables a tales tarjetas y al concentrador. Como eventualmente
          usted mismo hará los cables, en esta sección damos
          instrucciones para que le resulte fácil el proceso. Requerirá
          unas pinzas especiales <sup>[<a name="idm1619508104" href="#ftn.idm1619508104">21</a>]</sup> para conectores RJ-45 y un probador
          (<span class="emphasis"><em>tester</em></span>) para comprobar que fluye
          corriente en los cables que haga.
        </p><p>
          Ubique en el espacio para la red los computadores y los cables
          (verifique que las medidas de su plano hayan sido correctas).
        </p><p>
          Ponga en cada extremo de cada uno de los cables un conector
          RJ-45 empleando unas pinzas especiales. Como el cable UTP se
          compone de 8 cablecitos de colores tenga en cuenta:
        </p><p>
          Deje entre 8mm y 12 mm de los 8 cables al descubierto.
          <sup>[<a name="idp2147315832" href="#ftn.idp2147315832">22</a>]</sup>
        </p><p>
          Al preparar los cables tenga en cuenta que las tarjetas de
          100MB y 1000MB requieren un orden especial de los cables que
          conforman un UTP 5, UTP 5e o UTP 6, si no aplica este orden,
          con algunos cables de varios metros puede tener problemas de
          comunicación (ni siquiera podrá resolver ARP). En redes de
          10MB y 100MB puede usar cualquier de estos tipos de cables,
          pero para redes de 1000MB debe usar UTP 5e o UTP 6. Hay dos
          secuencias estandarizadas para los cables que conforman un UTP
          5/5e/6, de las cuales la más común es la TIA/EIA-568-B:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Para cables directos (que unen por ejemplo un computador a
              un concentrador), los dos extremos del cable se ponen en
              el conector RJ-45 siguiendo la misma secuencia: 1 -
              blanco/naranja, 2 - naranja, 3 - blanco/verde, 4 - azul, 5
              - blanco/azul, 6 - verde, 7 - blanco/cafe, 8 - cafe
            </p></li><li><p>
              Para un cable cruzado (que permite unir dos computadores o
              en algunos casos 2 concentradores): Lado 1: 1 -
              blanco/naranja, 2 - naranja, 3 - blanco/verde, 4 - azul, 5
              - blanco/azul, 6 - verde, 7 - blanco/cafe, 8 - cafe. Lado
              2: 1 - blanco/verde, 2 - verde , 3 - blanco/naranja, 4 -
              blanco/cafe, 5 - cafe, 6 - naranja, 7 - azul, 8 -
              blanco/azul.
            </p></li></ul></div><p>
          Empareje los 8 cablecitos antes de intentar ponerlos en el
          conector RJ-45. Póngalos en el orden antes indicado para
          cables directos.
        </p><p>
          El conector RJ45 tiene varios canales, por cada uno de esos
          canales debe pasar un cablecito de color. Empuje bien los
          cablecitos hasta el fondo del conector RJ-45 y con las pinzas
          especiales baje los contactos del conector y asegure el cable.
        </p><p>
          Después de ensamblar el primer extremo verifique con un
          probador que todos los cablecitos hagan contacto. Después
          ensamble el segundo extremo empleando la misma secuencia de
          colores y después verifique que estén haciendo buen contacto
          con un probador.
        </p><p>
          Una vez tenga los cables verifique que la tarjeta de red de
          cada computador esté bien instalada (algunas tienen luces
          <sup>[<a name="idp992767992" href="#ftn.idp992767992">23</a>]</sup> que se encienden cuando transmite o recibe
          información por el cable), y conecte con cables todas las
          tarjetas al concentrador.
        </p><p>
          Verifique también que cada tarjeta de red sea reconocida por
          el kernel y asigne la IP que planeó para cada una (ver
          <a href="dispositivos_de_interconexion.html#configuracion-interfaz" title="3.4.2. Configuración de una interfaz de red">Configuración de una
          interfaz de red</a>).
        </p><p>
          Finalmente verifique la instalación transmitiendo paquetes de
          un computador a otro. Por ejemplo desde el servidor (tal vez
          con IP 192.168.1.1) intente conectarse a un cliente (tal vez
          IP 192.168.1.2) con <code class="literal">ping</code> :
        </p><pre class="programlisting">
    ping 192.168.1.2    
</pre><p>
          y viceversa.
        </p></div></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="referencias-lan"></a>3.4.5. Referencias</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            FAQ de OpenBSD Sección 6.
          </p></li><li><p>
            Páginas <code class="literal">man</code> de <code class="literal">arp</code>,
            <code class="literal">route</code>, <code class="literal">ifconfig</code>,
            <code class="literal">hostname.if</code>
          </p></li><li><p>
            Sobre cables Ethernet puede consultarse en
            <a href="biblio.html" title="B. Bibliografía">ethernet_cables</a>
          </p></li></ul></div></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="red-inalambrica"></a>3.5. Red Local Inalámbrica: uso y configuración</h3></div></div></div><p>
      Las redes inalámbrica emplean ondas electromagnéticas transmitidas
      por aire, por lo que no se requieren cables, aunque el rango de
      alcance es limitado por el tipo de antenas que se empleen y los
      obstáculos (sin antenas especiales piense en menos de 50 metros
      con línea de vista y menos cuando hay paredes y otros obstáculos).
    </p><p>
      Para redes locales los protocolos más utilizados son IEEE 802.11a,
      802.11b y 802.11g, que emplean rangos del espectro
      electromagnético (como 2.4GHz) los cuales pueden usarse sin
      requerir permiso en Colombia y dan tasas de transferencia entre
      11Mbps y 54Mbps.
    </p><p>
      Una red local inalámbrica requiere un Punto de Acceso Inalámbrico
      (en inglés <span class="emphasis"><em>Access Point</em></span>) que atienda
      peticiones y dé respuestas a todos los computadores cliente que se
      conecten. Tal Punto de Acceso Inalámbrico puede ser un dispositivo
      dedicado o bien un computador con OpenBSD que cuente con una
      tarjeta de inalámbrica que soporte el modo
      <code class="literal">hostap</code>.
    </p><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="cliente-inalambrico"></a>3.5.1. OpenBSD como cliente en una red inalámbrica</h4></div></div></div><p>
        Hay una amplia gama de tarjetas de red inalámbricas (tanto PCI,
        como USB) con controladores para OpenBSD, sin embargo varias
        tarjetas de red populares no son soportadas, por lo que antes de
        comprar examine el listado de tarjetas soportadas en:
        <a href="http://dhobsd.pasosdejesus.org/?id=CompatibilidadHardware" target="_top">http://dhobsd.pasosdejesus.org/?id=CompatibilidadHardware</a>.
        Una vez conecte su tarjeta de red inalámbrica, busque la
        interfaz de red asociada con
      </p><pre class="programlisting">
    ifconfig
</pre><p>
        o algunos detalles de lo que se ve del hardware con
      </p><pre class="programlisting">
    dmess | less
</pre><p>
        Por ejemplo una Intel PRO/Wireless se ve así:
      </p><pre class="programlisting">
    wpi0 at pci3 dev 0 function 0 "Intel PRO/Wireless 3945ABG" rev 0x02: irq 10, MoW1, address 00:1b:77:d6:52:ee
</pre><p>
        y una D-Link USB típica se ve:
      </p><pre class="programlisting">
    rum0 at uhub0 port 5 "Ralink 802.11 bg WLAN" rev 2.00/0.01 addr 2
    rum0: MAC/BBP RT2573 (rev 0x2573a), RF RT2528, address 00:1e:58:b0:db:68
</pre><p>
        En algunos casos OpenBSD incluye el controlador completo de
        fuentes abiertas para a la tarjeta (por ejemplo
        <code class="literal">rum0</code>) pero en otros es necesario descargar
        firmware adicional (por ejemplo <code class="literal">wpi0</code>). Vea la
        página del controlador para encontrar detalles, por ejemplo en
        el caso de <code class="literal">wpi0</code> al examinar
        <code class="literal">man wpi</code> se ve que esta tarjeta requiere
        firmware adicional que debe instalar con:
      </p><pre class="programlisting">
    doas pkg_add http://damien.bergamini.free.fr/packages/openbsd/wpi-firmware-3.2.tgz
</pre><p>
        Después de tener controlador completo puede buscar redes
        inalámbricas cercanas con
      </p><pre class="programlisting">
    doas ifconfig rum0 scan 
</pre><p>
        remplazando <code class="literal">rum0</code> por la interfaz de su
        tarjeta. Verá un listado de redes próximas con identificación,
        calidad de la señal, velocidad y tipo de cifrado.
      </p><p>
        Para conectarse a una red basta configurar la tarjeta con la
        identificación, tipo de cifrado y clave apropiadas y
        posteriormente asignar una IP en la red inalámbrica, bien
        manualmente o bien por DHCP si el Access Point lo soporta (como
        ocurre típicamente). Para configurar a una red de nombre MIRED
        que no emplea cifrado:
      </p><pre class="programlisting">
    doas ifconfig rum0 nwid MIRED 
</pre><p>
        Si la red emplea cifrad oWEP (un mecanismo de cifrado débil),
        puede especificar la llave de cifrado en hexadecimal:
      </p><pre class="programlisting">
    doas ifconfig rum0 nwid MIRED nwkey 0x123498a2d2
</pre><p>
        o en ASCII:
      </p><pre class="programlisting">
    doas ifconfig rum0 nwid MIRED nwkey "clave"
</pre><p>
        Si la red emplea cifrado WAP (un mecanismo de cifrado más
        fuerte):
      </p><pre class="programlisting">
    doas ifconfig rum0 nwid MIRED wpakey MICLAVE
</pre><p>
        Después puede examinar nuevamente con
        <code class="literal">ifconfig</code> si ya se ve estado Activo en la
        interfaz de red lo cual le confirma que logró conexión y
        posteriormente puede establecer la IP bien manualmente si conoce
        el segmente de red:
      </p><pre class="programlisting">
    ifconfig rum0 192.168.1.15
</pre><p>
        o bien automáticamente si el Acess Point soporta DHCP con:
      </p><pre class="programlisting">
    doas dhclient rum0
</pre><p>
        Tras esto al examinar con <code class="literal">ifconfig</code> se ve algo
        como:
      </p><pre class="programlisting">
    rum0: flags=8c43&lt;UP,BROADCAST,RUNNING,OACTIVE,SIMPLEX,MULTICAST&gt; mtu 1500
            lladdr 00:1e:58:b0:db:68
            priority: 4
            groups: wlan egress
            media: IEEE802.11 autoselect (OFDM36 mode 11g)
            status: active
            ieee80211: nwid MIRED chan 1 bssid 00:02:6f:5f:f8:6a 117dB nwkey &lt;not displayed&gt; 100dBm
            inet 192.168.44.50 netmask 0xffffff00 broadcast 192.168.44.255
            inet6 fe80::21e:58ff:feb0:db68%rum0 prefixlen 64 scopeid 0x6
</pre><p>
        Si requiere conectarse en cada arranque del computador configure
        en <code class="literal">hostname.rum0</code> (cambiando rum0 por su
        interfaz). Por ejemplo si tiene una IP fija con:
      </p><pre class="programlisting">
    inet 192.168.44.50 255.255.255.0 NONE nwid "MIRED" nwkey "clave"
</pre><p>
        o si requiere DHCP:
      </p><pre class="programlisting">
    dhcp NONE NONE NONE nwid "MIRED" nwkey "0x1112131415"
</pre><p>
        o si es WPA con DHCP:
      </p><pre class="programlisting">
    dhcp nwid "MIRED" wpakey "clave"
</pre><p>
        El tráfico de red inalámbrico puede examinarse con el paquete
        <code class="literal">kismet</code>, el cual tiene un archivo de
        configuración (<code class="literal">/etc/kismet.conf</code>) en el que
        debe especificarse el controlador usado.
      </p></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="dispositivo-AP"></a>3.5.2. Dispositivo dedicado que obra como Punto de Acceso
      Inalámbrico</h4></div></div></div><p>
        Estos dispositivo cuentan con una antena (típicamente pequeña)
        para la red inalámbrica y un conector para cable Ethernet que se
        conecta a la red cableada, la cual típicamente va a Internet.
      </p><p>
        Normalmente los dispositivos que obran como Punto de Acceso
        Inalámbrico (Access Point) cuentan con un servicio de
        configuración que opera sobre HTTP por lo que pueden conectarse
        a un computador y emplear un navegador web.
      </p><p>
        Para conectarlo a un computador basta que ponga un cable
        Ethernet sin cruzar entre ambos y que ambos estén en el mismo
        segmento de red con IPs diferentes. La IP inicial de su Punto de
        Acceso Inalámbrico seguramente la podrá ver en el manual del
        usuario (típicamente es 192.168.0.1 o 192.1681.1.1 con máscara
        de red 255.255.255.0). Para determinar la IP de un Punto de
        Accesos Inalámbrico también puede intentar conectándolo a un
        computador y usando <code class="literal">tcpdump</code> para examinar el
        tráfico que pasa por la interfaz de red a la cual conecte el
        Punto de Acceso Inalámbrico.
      </p><p>
        Una vez determine la IP del Punto de Acceso Inalámbrico ponga el
        computador con el que configurará en el mismo segmento de red.
        Por ejemplo si el Access Point tiene IP 192.168.1.1 y lo conectó
        a la interfaz <code class="literal">rl0</code>, configure esa interfaz de
        red por ejemplo con:
      </p><pre class="programlisting">
    ifconfig rl0 192.168.1.2 
</pre><p>
        tras lo cual ya debe poder ejecutar:
      </p><pre class="programlisting">
    ping 192.168.1.1
</pre><p>
        obtener respuesta del Punto de Acceso Inalámbrico y configurarlo
        abriendo en un navegador el URL
        <code class="literal">http://192.168.1.1</code>.
      </p><p>
        El Punto de Acceso Inalámbrico normalmente obrará como enrutador
        y hará NAT a una nueva red que será independiente de la red
        cableada a la cual lo conecte. Por ejemplo si lo conecta por
        cable Ethernet a una red con IPs 192.168.190/24, podrá enrutar y
        hacer NAT a otra red como la 192.168.1/24. Algunos Puntos de
        Acceso Inalámbricos (como el EnGenius EOC 1650) soportan un modo
        puente que permite distribuir con DHCP algunas direcciones de la
        misma red cableada. Esto tiene la ventaja de dejar tanto la red
        inalámbrica como la cableada en el mismo segmento de red.
      </p><p>
        Las particularidades de configuración de cada Punto de Acceso
        Inalámbrico varían de un modelo a otro, pero normalmente debe
        especificar:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            IP, máscara de red, puerta de enlace y servidor DNS en la
            red cableada.
          </p></li><li><p>
            IP, máscara de red y rango de direcciones por repartir en la
            red inalámbrica.
          </p></li></ul></div></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="PAI"></a>3.5.3. OpenBSD como Punto de Acceso Inalámbrico</h4></div></div></div><p>
        Si cuenta con una tarjeta de red inalámbrica con controladores
        para OpenBSD y que soporte el modo <code class="literal">hostap</code>
        (como puede consultar en la página del manual del controlador)
        es sencillo configurar un Punto de Acceso Inalámbrico,
        continuando las instrucciones de la sección
        <a href="dispositivos_de_interconexion.html#cliente-inalambrico" title="3.5.1. OpenBSD como cliente en una red inalámbrica">OpenBSD como cliente en una
        red inalámbrica</a>.
      </p><p>
        Supongamos que su tarjeta esta asociada a la interfaz
        <code class="literal">ath0</code>, que desea emplear el segmento
        192.168.3/24, llamar a la red CASA con cifrado WEP y clave
        "uvwxy". Basta que en
        <code class="literal">/etc/hostname.ath0</code> configure:
      </p><pre class="programlisting">
    inet 192.168.3.1 255.255.255.0 NONE media autoselect \
    mediaopt hostap nwid CASA chan 11 nwkey "uvwxy"
</pre><p>
        Tras esto desde los portátiles y computadores cercanos debe
        poder ver la red CASA y conectarse con WEP y la clave uvwxy.
      </p></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="referencias-wlan"></a>3.5.4. Referencias</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Páginas <code class="literal">man</code> de
            <code class="literal">ifconfig</code>, <code class="literal">wpi</code>
          </p></li><li><p>
            Ver <a href="biblio.html" title="B. Bibliografía">wndw</a>
          </p></li></ul></div></div></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p xmlns="http://www.w3.org/TR/xhtml1/transitional"><sup>[<a name="ftn.idm53640712" href="#idm53640712">17</a>] </sup>
            Como parámetro getty recibe características de la línea que
            deben estar especificadas en
            <code xmlns="" class="literal">/etc/gettytab</code>. En este caso
            <code xmlns="" class="literal">std.9600</code> especifica la velocidad de
            transmisión. Empleando un módem nulo con control de flujo es
            posible emplear velocidades mayores hasta
            <code xmlns="" class="literal">std.115200</code>.
          </p></div><div class="footnote"><p xmlns="http://www.w3.org/TR/xhtml1/transitional"><sup>[<a name="ftn.idm722672264" href="#idm722672264">18</a>] </sup>
            banderas del inglés <span xmlns="" class="emphasis"><em>flags</em></span>
          </p></div><div class="footnote"><p xmlns="http://www.w3.org/TR/xhtml1/transitional"><sup>[<a name="ftn.idp2022090872" href="#idp2022090872">19</a>] </sup>
            PPP es un protocolo especificado en el RFC 1661.
          </p></div><div class="footnote"><p xmlns="http://www.w3.org/TR/xhtml1/transitional"><sup>[<a name="ftn.idm718498312" href="#idm718498312">20</a>] </sup>
          Pueden ponerse concentradores en cascada.
        </p></div><div class="footnote"><p xmlns="http://www.w3.org/TR/xhtml1/transitional"><sup>[<a name="ftn.idm1619508104" href="#idm1619508104">21</a>] </sup>
              En Colombia a tal "pinza especial" se le conoce
              como "ponchadora".
            </p></div><div class="footnote"><p xmlns="http://www.w3.org/TR/xhtml1/transitional"><sup>[<a name="ftn.idp2147315832" href="#idp2147315832">22</a>] </sup>
              Pablo Chamorro nos indicó que "algunas pinzas tienen
              un tope, entonces al colocar las puntas de los cables
              junto al tope, el corte de la envoltura del cable siempre
              se realiza en el mismo punto para que ni sobre ni falte y
              así no hay que preocuparse por estimar el punto de
              corte."
            </p></div><div class="footnote"><p xmlns="http://www.w3.org/TR/xhtml1/transitional"><sup>[<a name="ftn.idp992767992" href="#idp992767992">23</a>] </sup>
              Luces es traducción de <span xmlns="" class="emphasis"><em>LED (Light emitting
              diode)</em></span>.
            </p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="redes_protocolos_e_internet.html">Anterior</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="direcciones_enrutamiento_transporte_y_cortafuegos.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">2. Redes, protocolos e Internet </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> 4. Direcciones, enrutamiento, transporte y cortafuegos</td></tr></table></div></body></html>

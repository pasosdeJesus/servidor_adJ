<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>La distribución Aprendiendo de Jesús como servidor y cortafuegos</title><meta name="generator" content="DocBook XSL Stylesheets V1.68.1"><link rel="start" href="index.html" title="La distribución Aprendiendo de Jesús como servidor y cortafuegos"><link rel="next" href="redes_protocolos_e_internet.html" title="2. Redes, protocolos e Internet"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">La distribución Aprendiendo de Jesús como servidor y cortafuegos</th></tr><tr><td width="20%" align="left"> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="redes_protocolos_e_internet.html">Siguiente</a></td></tr></table><hr></div><div class="article" lang="es"><div class="titlepage"><div><div><h1 class="title"><a name="idm133243144"></a>La distribución Aprendiendo de Jesús como servidor y cortafuegos</h1></div><div><div class="author"><h3 class="author"><span class="firstname">Vladimir</span> <span class="surname">Támara Patiño
		(vtamara@pasosdeJesus.org)</span></h3></div></div><div><div class="legalnotice"><a name="idm1548247944"></a><p>
		    Este documento y sus fuentes se ceden al dominio
		    público desde 2004.  Esta es la versión 6.6 de este documento, 
		    actualizada por última vez en 23/03/2020 para que corresponda a 
		    la distribución adJ de OpenBSD 6.6.  
		    No se ofrece garantía alguna, por el contrario se aprecia
		    que se envíen correcciones y sugerencias al autor.  Este
		    escrito se dedica a Dios por su infinita sabiduría.</p><p>
		    Agradecemos las correcciones de Luis Alejandro Cruz</p><p>
	La versión publicada más reciente está tanto
	<a href="http://pasosdejesus.github.io/servidor_adJ/" target="_top">en línea</a>  como
	<a href="servidor_adJ-6.6_html.tar.gz" target="_top">en archivo comprimido</a> 
	y como <a href="http://adJ.pasosdeJesus.org/pub/AprendiendoDeJesus/6.6/paquetes/servidor_adJ-6.6.tar.gz" target="_top">paquete para adJ/OpenBSD</a>.
	
	Sus fuentes en DocBook están disponibles en 
	<a href="https://github.com/pasosdeJesus/servidor_adJ/" target="_top">https://github.com/pasosdeJesus/servidor_adJ/</a>.
      </p></div></div></div><hr></div><div class="toc"><p><b>Tabla de contenidos</b></p><dl><dt><span class="sect1"><a href="index.html#introduccion">1. Introducción</a></span></dt><dt><span class="sect1"><a href="redes_protocolos_e_internet.html">2. Redes, protocolos e Internet</a></span></dt><dd><dl><dt><span class="sect2"><a href="redes_protocolos_e_internet.html#Internet">2.1. Internet</a></span></dt><dt><span class="sect2"><a href="redes_protocolos_e_internet.html#capas-de-una-red-tcpip-sobre-algunos-medios-f%C3%ADsicos">2.2. Capas de una red TCP/IP sobre algunos medios físicos</a></span></dt><dd><dl><dt><span class="sect3"><a href="redes_protocolos_e_internet.html#capa-f%C3%ADsica">2.2.1. Capa física</a></span></dt><dt><span class="sect3"><a href="redes_protocolos_e_internet.html#capa-de-enlace">2.2.2. Capa de enlace</a></span></dt><dt><span class="sect3"><a href="redes_protocolos_e_internet.html#capa-de-internet">2.2.3. Capa de internet</a></span></dt><dt><span class="sect3"><a href="redes_protocolos_e_internet.html#capa-de-transporte">2.2.4. Capa de transporte</a></span></dt><dt><span class="sect3"><a href="redes_protocolos_e_internet.html#capa-de-aplicaci%C3%B3n">2.2.5. Capa de aplicación</a></span></dt></dl></dd><dt><span class="sect2"><a href="redes_protocolos_e_internet.html#lecturas-redes-protocolos-internet">2.3. Lecturas recomendadas</a></span></dt></dl></dd><dt><span class="sect1"><a href="dispositivos_de_interconexion.html">3. Dispositivos de interconexión</a></span></dt><dd><dl><dt><span class="sect2"><a href="dispositivos_de_interconexion.html#modem-nulo">3.1. Conexión con un módem nulo</a></span></dt><dd><dl><dt><span class="sect3"><a href="dispositivos_de_interconexion.html#modem-nulo-hardware">3.1.1. Módem Nulo</a></span></dt><dt><span class="sect3"><a href="dispositivos_de_interconexion.html#servidor">3.1.2. Servidor</a></span></dt><dt><span class="sect3"><a href="dispositivos_de_interconexion.html#Terminal">3.1.3. Terminal</a></span></dt><dt><span class="sect3"><a href="dispositivos_de_interconexion.html#ppp-sobre-modem-nulo">3.1.4. PPP sobre Módem Nulo</a></span></dt><dt><span class="sect3"><a href="dispositivos_de_interconexion.html#referencias-modem-nulo">3.1.5. Referencias y lecturas recomendadas</a></span></dt></dl></dd><dt><span class="sect2"><a href="dispositivos_de_interconexion.html#modem-isdn">3.2. Conexión a Internet con un módem o módem ISDN</a></span></dt><dt><span class="sect2"><a href="dispositivos_de_interconexion.html#adsl-pppoe">3.3. Conexión a Internet ADSL con pppoe</a></span></dt><dd><dl><dt><span class="sect3"><a href="dispositivos_de_interconexion.html#referencias-pppoe">3.3.1. Referencias y lecturas recomendadas</a></span></dt></dl></dd><dt><span class="sect2"><a href="dispositivos_de_interconexion.html#lan-ethernet">3.4. Uso y configuración en una red LAN Ethernet</a></span></dt><dd><dl><dt><span class="sect3"><a href="dispositivos_de_interconexion.html#tarjetas-ethernet">3.4.1. Tarjetas Ethernet</a></span></dt><dt><span class="sect3"><a href="dispositivos_de_interconexion.html#configuracion-interfaz">3.4.2. Configuración de una interfaz de red</a></span></dt><dt><span class="sect3"><a href="dispositivos_de_interconexion.html#protocolo-arp">3.4.3. Protocolo ARP</a></span></dt><dt><span class="sect3"><a href="dispositivos_de_interconexion.html#cableado">3.4.4. Cableado de una red local</a></span></dt><dt><span class="sect3"><a href="dispositivos_de_interconexion.html#referencias-lan">3.4.5. Referencias</a></span></dt></dl></dd><dt><span class="sect2"><a href="dispositivos_de_interconexion.html#red-inalambrica">3.5. Red Local Inalámbrica: uso y configuración</a></span></dt><dd><dl><dt><span class="sect3"><a href="dispositivos_de_interconexion.html#cliente-inalambrico">3.5.1. OpenBSD como cliente en una red inalámbrica</a></span></dt><dt><span class="sect3"><a href="dispositivos_de_interconexion.html#dispositivo-AP">3.5.2. Dispositivo dedicado que obra como Punto de Acceso
      Inalámbrico</a></span></dt><dt><span class="sect3"><a href="dispositivos_de_interconexion.html#PAI">3.5.3. OpenBSD como Punto de Acceso Inalámbrico</a></span></dt><dt><span class="sect3"><a href="dispositivos_de_interconexion.html#referencias-wlan">3.5.4. Referencias</a></span></dt></dl></dd></dl></dd><dt><span class="sect1"><a href="direcciones_enrutamiento_transporte_y_cortafuegos.html">4. Direcciones, enrutamiento, transporte y cortafuegos</a></span></dt><dd><dl><dt><span class="sect2"><a href="direcciones_enrutamiento_transporte_y_cortafuegos.html#ipv4">4.1. Introducción a TCP/IPv4</a></span></dt><dd><dl><dt><span class="sect3"><a href="direcciones_enrutamiento_transporte_y_cortafuegos.html#tabla-enrutamiento">4.1.1. Tabla de Enrutamiento</a></span></dt><dt><span class="sect3"><a href="direcciones_enrutamiento_transporte_y_cortafuegos.html#configuracion-OpenBSD">4.1.2. Otros aspectos de configuración de redes en OpenBSD</a></span></dt></dl></dd><dt><span class="sect2"><a href="direcciones_enrutamiento_transporte_y_cortafuegos.html#nat">4.2. NAT (Network Address Translation)</a></span></dt><dd><dl><dt><span class="sect3"><a href="direcciones_enrutamiento_transporte_y_cortafuegos.html#referencias-nat">4.2.1. Referencias y lecturas recomendadas</a></span></dt></dl></dd><dt><span class="sect2"><a href="direcciones_enrutamiento_transporte_y_cortafuegos.html#cortafuegos">4.3. Cortafuegos: filtrado y túneles</a></span></dt><dd><dl><dt><span class="sect3"><a href="direcciones_enrutamiento_transporte_y_cortafuegos.html#referencias-cortafuegos">4.3.1. Referencias y lecturas recomendadas</a></span></dt></dl></dd><dt><span class="sect2"><a href="direcciones_enrutamiento_transporte_y_cortafuegos.html#ftpproxy">4.4. ftp-proxy: para usar ftp desde la red interna</a></span></dt><dd><dl><dt><span class="sect3"><a href="direcciones_enrutamiento_transporte_y_cortafuegos.html#referencias-ftpproxy">4.4.1. Referencias y lecturas recomendadas</a></span></dt></dl></dd><dt><span class="sect2"><a href="direcciones_enrutamiento_transporte_y_cortafuegos.html#ejemplopf">4.5. Ejemplo del uso de PF en una DMZ</a></span></dt><dd><dl><dt><span class="sect3"><a href="direcciones_enrutamiento_transporte_y_cortafuegos.html#referencias-ejemplopf">4.5.1. Referencias y lecturas recomendadas</a></span></dt></dl></dd><dt><span class="sect2"><a href="direcciones_enrutamiento_transporte_y_cortafuegos.html#control-de-ancho-de-banda">4.6. Control de ancho de banda</a></span></dt><dd><dl><dt><span class="sect3"><a href="direcciones_enrutamiento_transporte_y_cortafuegos.html#referencias-control-ancho-banda">4.6.1. Referencias y lecturas recomendadas</a></span></dt></dl></dd></dl></dd><dt><span class="sect1"><a href="protocolos_de_soporte_y_de_usuario.html">5. Protocolos de soporte y de usuario</a></span></dt><dd><dl><dt><span class="sect2"><a href="protocolos_de_soporte_y_de_usuario.html#servidor-dns">5.1. Servicio DNS</a></span></dt><dd><dl><dt><span class="sect3"><a href="protocolos_de_soporte_y_de_usuario.html#resolucion-de-nombres">5.1.1. Resolución de nombres</a></span></dt><dt><span class="sect3"><a href="protocolos_de_soporte_y_de_usuario.html#unbound">5.1.2. Servidor recursivo unbound</a></span></dt><dt><span class="sect3"><a href="protocolos_de_soporte_y_de_usuario.html#nsd">5.1.3. Servidor autoritario con NSD</a></span></dt><dt><span class="sect3"><a href="protocolos_de_soporte_y_de_usuario.html#named">5.1.4. named</a></span></dt><dt><span class="sect3"><a href="protocolos_de_soporte_y_de_usuario.html#referencias-dns">5.1.5. Referencias y lecturas recomendadas</a></span></dt></dl></dd><dt><span class="sect2"><a href="protocolos_de_soporte_y_de_usuario.html#servidor-ssh">5.2. Servidor <code class="literal">ssh</code></a></span></dt><dd><dl><dt><span class="sect3"><a href="protocolos_de_soporte_y_de_usuario.html#referencias-sshd">5.2.1. Referencias y lecturas recomendadas</a></span></dt></dl></dd><dt><span class="sect2"><a href="protocolos_de_soporte_y_de_usuario.html#dhcp">5.3. Protocolo DHCP</a></span></dt><dd><dl><dt><span class="sect3"><a href="protocolos_de_soporte_y_de_usuario.html#cliente-DHCP">5.3.1. Configuración de un cliente DHCP</a></span></dt><dt><span class="sect3"><a href="protocolos_de_soporte_y_de_usuario.html#servidor-DHCP">5.3.2. Configuración de un servidor DHCP</a></span></dt><dt><span class="sect3"><a href="protocolos_de_soporte_y_de_usuario.html#referencias-dhcpd">5.3.3. Referencias y lecturas recomendadas</a></span></dt></dl></dd><dt><span class="sect2"><a href="protocolos_de_soporte_y_de_usuario.html#servidor-ntp">5.4. Servidor <code class="literal">ntp</code></a></span></dt><dd><dl><dt><span class="sect3"><a href="protocolos_de_soporte_y_de_usuario.html#referencias-ntp">5.4.1. Referencias y lecturas recomendadas</a></span></dt></dl></dd><dt><span class="sect2"><a href="protocolos_de_soporte_y_de_usuario.html#servicios-correo">5.5. Servidor de correo electrónico</a></span></dt><dd><dl><dt><span class="sect3"><a href="protocolos_de_soporte_y_de_usuario.html#smtp">5.5.1. Protocolo SMTP para enviar y recibir correo</a></span></dt><dt><span class="sect3"><a href="protocolos_de_soporte_y_de_usuario.html#dominios-virtuales-correo">5.5.2. Dominios virtuales</a></span></dt><dt><span class="sect3"><a href="protocolos_de_soporte_y_de_usuario.html#protocolos-revisar-correo">5.5.3. Protocolos para revisar correo</a></span></dt><dt><span class="sect3"><a href="protocolos_de_soporte_y_de_usuario.html#spam">5.5.4. Combatiendo correo no solicitado con SpamAssassin</a></span></dt><dt><span class="sect3"><a href="protocolos_de_soporte_y_de_usuario.html#correo-web">5.5.5. Correo desde el web (webmail)</a></span></dt><dt><span class="sect3"><a href="protocolos_de_soporte_y_de_usuario.html#listas-correo">5.5.6. Listas de correo</a></span></dt></dl></dd><dt><span class="sect2"><a href="protocolos_de_soporte_y_de_usuario.html#servidor-ftp">5.6. Servidor <code class="literal">ftp</code></a></span></dt><dd><dl><dt><span class="sect3"><a href="protocolos_de_soporte_y_de_usuario.html#ftpdmz">5.6.1. Servicio FTP en una DMZ</a></span></dt><dt><span class="sect3"><a href="protocolos_de_soporte_y_de_usuario.html#referencias-ftp">5.6.2. Referencias y lecturas recomendadas</a></span></dt></dl></dd><dt><span class="sect2"><a href="protocolos_de_soporte_y_de_usuario.html#servidor-web">5.7. Servidor web</a></span></dt><dd><dl><dt><span class="sect3"><a href="protocolos_de_soporte_y_de_usuario.html#nginx">5.7.1. nginx</a></span></dt><dt><span class="sect3"><a href="protocolos_de_soporte_y_de_usuario.html#letsencrypt">5.7.2. Certificados SSL gratuitos con Let's Encrypt</a></span></dt><dt><span class="sect3"><a href="protocolos_de_soporte_y_de_usuario.html#openbsd-httpd">5.7.3. OpenBSD httpd</a></span></dt></dl></dd></dl></dd><dt><span class="sect1"><a href="otros_servicios_que_puede_prestar_el_servidor.html">6. Otros servicios que puede prestar el servidor</a></span></dt><dd><dl><dt><span class="sect2"><a href="otros_servicios_que_puede_prestar_el_servidor.html#cuotas">6.1. Cuotas</a></span></dt><dd><dl><dt><span class="sect3"><a href="otros_servicios_que_puede_prestar_el_servidor.html#referencias-quota">6.1.1. Referencias y lecturas recomendadas</a></span></dt></dl></dd><dt><span class="sect2"><a href="otros_servicios_que_puede_prestar_el_servidor.html#postgresql">6.2. Motor de bases de datos PostgreSQL</a></span></dt><dd><dl><dt><span class="sect3"><a href="otros_servicios_que_puede_prestar_el_servidor.html#primera-instalacion">6.2.1. Primera instalación del servidor</a></span></dt><dt><span class="sect3"><a href="otros_servicios_que_puede_prestar_el_servidor.html#autenticacion">6.2.2. Habilitando autenticación</a></span></dt><dt><span class="sect3"><a href="otros_servicios_que_puede_prestar_el_servidor.html#creacion-base">6.2.3. Creación de una base de datos</a></span></dt><dt><span class="sect3"><a href="otros_servicios_que_puede_prestar_el_servidor.html#uso-base">6.2.4. Uso de una base de datos</a></span></dt><dt><span class="sect3"><a href="otros_servicios_que_puede_prestar_el_servidor.html#postgresql-cotejacion">6.2.5. Cotejación en PostgreSQL</a></span></dt><dt><span class="sect3"><a href="otros_servicios_que_puede_prestar_el_servidor.html#respaldo-postgresql">6.2.6. Copias de respaldo</a></span></dt><dt><span class="sect3"><a href="otros_servicios_que_puede_prestar_el_servidor.html#base-postgresql-remota">6.2.7. Base PostgreSQL remota</a></span></dt><dt><span class="sect3"><a href="otros_servicios_que_puede_prestar_el_servidor.html#referencias-postgresql">6.2.8. Referencias y lecturas recomendadas</a></span></dt></dl></dd><dt><span class="sect2"><a href="otros_servicios_que_puede_prestar_el_servidor.html#mariadb">6.3. MariaDB</a></span></dt><dd><dl><dt><span class="sect3"><a href="otros_servicios_que_puede_prestar_el_servidor.html#uso-mariadb">6.3.1. Uso básico</a></span></dt><dt><span class="sect3"><a href="otros_servicios_que_puede_prestar_el_servidor.html#clave-mysql">6.3.2. Cambio de la clave de administrador</a></span></dt><dt><span class="sect3"><a href="otros_servicios_que_puede_prestar_el_servidor.html#recuperacion-backups">6.3.3. Recuperación y backups</a></span></dt><dt><span class="sect3"><a href="otros_servicios_que_puede_prestar_el_servidor.html#chroot-mysql">6.3.4. MariaDB y servidor web con chroot</a></span></dt><dt><span class="sect3"><a href="otros_servicios_que_puede_prestar_el_servidor.html#lecutras-mysql">6.3.5. Lecturas recomendadas</a></span></dt></dl></dd><dt><span class="sect2"><a href="otros_servicios_que_puede_prestar_el_servidor.html#ldapd">6.4. Servidor ldapd</a></span></dt><dd><dl><dt><span class="sect3"><a href="otros_servicios_que_puede_prestar_el_servidor.html#instalacion-ldapd">6.4.1. Instalación de ldapd</a></span></dt><dt><span class="sect3"><a href="otros_servicios_que_puede_prestar_el_servidor.html#pruebas-openldap">6.4.2. Pruebas Iniciales con openldap-client</a></span></dt><dt><span class="sect3"><a href="otros_servicios_que_puede_prestar_el_servidor.html#datos-iniciales-ldapd">6.4.3. Adición de datos iniciales</a></span></dt><dt><span class="sect3"><a href="otros_servicios_que_puede_prestar_el_servidor.html#phpldapadmin">6.4.4. Instalación y configuración de
      <code class="literal">phpldapadmin</code></a></span></dt><dt><span class="sect3"><a href="otros_servicios_que_puede_prestar_el_servidor.html#referencias-ldapd">6.4.5. Referencias y lecturas recomendadas</a></span></dt></dl></dd><dt><span class="sect2"><a href="otros_servicios_que_puede_prestar_el_servidor.html#autoridad_certificadora">6.5. Autoridad certificadora interna</a></span></dt><dd><dl><dt><span class="sect3"><a href="otros_servicios_que_puede_prestar_el_servidor.html#conceptos">6.5.1. Conceptos</a></span></dt><dt><span class="sect3"><a href="otros_servicios_que_puede_prestar_el_servidor.html#configuraci%C3%B3n-de-servidor-1">6.5.2. Configuración de servidor</a></span></dt><dt><span class="sect3"><a href="otros_servicios_que_puede_prestar_el_servidor.html#generaci%C3%B3n-de-un-par-de-certificados">6.5.3. Generación de un par de certificados</a></span></dt><dt><span class="sect3"><a href="otros_servicios_que_puede_prestar_el_servidor.html#uso-de-los-certificados">6.5.4. Uso de los certificados</a></span></dt><dt><span class="sect3"><a href="otros_servicios_que_puede_prestar_el_servidor.html#referencias">6.5.5. Referencias</a></span></dt></dl></dd></dl></dd><dt><span class="appendix"><a href="novedades.html">A. Novedades</a></span></dt><dt><span class="appendix"><a href="biblio.html">B. Bibliografía</a></span></dt></dl></div><div class="sect1" lang="es"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="introduccion"></a>1. Introducción</h2></div></div></div><p>En este escrito describimos el sistema operativo OpenBSD 
	    6.6 con los programas y características de la 
	    distribución Aprendiendo de Jesús (adJ) que se emplea en 
	    servidores seguros o cortafuegos conectados
      a Internet o en una Intranet.  Este escrito es complementario
      a <a href="biblio.html" title="B. Bibliografía">basico_adJ</a> y a 
      <a href="biblio.html" title="B. Bibliografía">usuario_adJ</a>,  el primero es para
      usuarios remotos y el segundo describe la instalación, uso 
      y configuración de programas y características típicas de 
      usuarios de escritorio.
    </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="redes_protocolos_e_internet.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top"> </td><td width="20%" align="center"> </td><td width="40%" align="right" valign="top"> 2. Redes, protocolos e Internet</td></tr></table></div></body></html>

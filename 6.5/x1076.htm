<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Control de ancho de banda</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="La distribución Aprendiendo de Jesús como servidor y cortafuegos"
HREF="book1.htm"><LINK
REL="UP"
TITLE="Direcciones, enrutamiento, transporte y cortafuegos"
HREF="c847.htm"><LINK
REL="PREVIOUS"
TITLE="Ejemplo del uso de PF en una DMZ"
HREF="x1066.htm"><LINK
REL="NEXT"
TITLE="Protocolos de soporte y de usuario"
HREF="c1092.htm"></HEAD
><BODY
CLASS="sect1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>La distribución Aprendiendo de Jesús como servidor y cortafuegos</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x1066.htm"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Capítulo 4. Direcciones, enrutamiento, transporte y cortafuegos</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="c1092.htm"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="control-de-ancho-de-banda"
>Control de ancho de banda</A
></H1
><P
>El siguiente ejemplo presenta como puede configurarse un servidor
    NAT para controlar ancho de banda de diversos computadores de 
    la red interna.    La conexión de la red interna es a 100MB, mientras
    que la conexión a Internet es de 300KB.  De todos los computadores de la
    red interna el ancho de banda se limita sólo a 4 computadores, cada uno
    máximo 30KB.  Los demás comparten el resto del ancho de banda.
    <PRE
CLASS="screen"
>&#13;table &#60;interna&#62; {192.168.2.2, 192.168.2.1, 192.168.1.1, 192.168.1.8, 192.168.1.21, 192.168.1.23, 192.168.1.30, 192.168.1.31, 192.168.1.37, 192.168.1.40, 192.168.1.41, 192.168.1.42, 192.168.1.43, 192.168.1.95, 192.168.1.70}

set loginterface $int_if
set fingerprints "/etc/pf.os"

altq on $int_if bandwidth 100Mb cbq queue { dflt_in, uext1_in, uext2_in, uext3_in, uext4_in}
altq on $ext_if bandwidth 300Kb cbq queue { dflt_out }

queue dflt_in cbq(default) bandwidth 80%
queue dflt_out cbq(default)

queue uext1_in bandwidth 30Kb
queue uext2_in bandwidth 30Kb
queue uext3_in bandwidth 30Kb
queue uext4_in bandwidth 30Kb

uext1="192.168.1.70" 
uext2="192.168.1.23" 
uext3="192.168.1.95"
uext4="192.168.1.30"

match out on $ext_if from &#60;interna&#62; to any nat-to ($ext_if)

pass  out on $int_if from any to $uext1 queue uext1_in
pass  out on $int_if from any to $uext2 queue uext2_in
pass  out on $int_if from any to $uext3 queue uext3_in
pass  out on $int_if from any to $uext4 queue uext4_in
</PRE
>
</P
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="referencias-control-ancho-banda"
>Referencias y lecturas recomendadas</A
></H2
><P
>&#13;	Las siguientes páginas man:
	<SPAN
CLASS="citerefentry"
><SPAN
CLASS="refentrytitle"
>pf</SPAN
>(4)</SPAN
>,
	<SPAN
CLASS="citerefentry"
><SPAN
CLASS="refentrytitle"
>pfctl</SPAN
>(4)</SPAN
>.
	</P
><P
>&#13;	Guía del usuario de PF [<SPAN
CLASS="citation"
><A
HREF="b2933.htm#PF"
>PF</A
></SPAN
>].
  </P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x1066.htm"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.htm"
ACCESSKEY="H"
>Inicio</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="c1092.htm"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Ejemplo del uso de PF en una DMZ</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="c847.htm"
ACCESSKEY="U"
>Subir</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Protocolos de soporte y de usuario</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>